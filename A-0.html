<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lang: A-0</title>
  </head>
  <body>
    <div id="app">
      <div id="editor-container" class="container">
        <div id="toolbar">
          <div id="buttons">
            <svg fill="#006d2d" height="25px" width="25px" version="1.1" class="button" id="start-button" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
              viewBox="0 0 330 330" xml:space="preserve">
              <path id="XMLID_308_" d="M37.728,328.12c2.266,1.256,4.77,1.88,7.272,1.88c2.763,0,5.522-0.763,7.95-2.28l240-149.999
                c4.386-2.741,7.05-7.548,7.05-12.72c0-5.172-2.664-9.979-7.05-12.72L52.95,2.28c-4.625-2.891-10.453-3.043-15.222-0.4
                C32.959,4.524,30,9.547,30,15v300C30,320.453,32.959,325.476,37.728,328.12z"/>
            </svg>
            <svg style="display: none" fill="#720000" height="25px" width="25px" version="1.1" class="button" id="stop-button" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
              viewBox="0 0 330 330" xml:space="preserve">
              <path id="XMLID_221_" d="M315,0H15C6.716,0,0,6.716,0,15v300c0,8.284,6.716,15,15,15h300c8.284,0,15-6.716,15-15V15
                C330,6.716,323.284,0,315,0z M150.75,232.5c0,8.284-6.716,15-15,15s-15-6.716-15-15v-135c0-8.284,6.716-15,15-15s15,6.716,15,15
                V232.5z M209.25,232.5c0,8.284-6.716,15-15,15c-8.284,0-15-6.716-15-15v-135c0-8.284,6.716-15,15-15c8.284,0,15,6.716,15,15V232.5z"
              />
            </svg>
          </div>

          <div id="file-menu">
            <input id="file-name" type="text" value="Default">
            <div class="button" id="select-file-button">
              <svg fill="rgba(255, 255, 255, 0.87)" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                width="1rem" height="1rem" viewBox="0 0 30.727 30.727"
                xml:space="preserve">
                <g>
                  <path d="M29.994,10.183L15.363,24.812L0.733,10.184c-0.977-0.978-0.977-2.561,0-3.536c0.977-0.977,2.559-0.976,3.536,0
                    l11.095,11.093L26.461,6.647c0.977-0.976,2.559-0.976,3.535,0C30.971,7.624,30.971,9.206,29.994,10.183z"/>
                </g>
              </svg>
            </div>
            <div id="file-popup">
              <div class="file-option" id="file-new-option">NEW +</div>
            </div>
          </div>

          <div>
            <label for="watch-checkbox">
              Watch mode
              <input id="watch-checkbox" type="checkbox">
            </label>
          </div>
        </div>
        <div id="editor" contenteditable="plaintext-only" placeholder="code here..."></div>
      </div>

      <div id="container-separator"></div>

      <div id="output-container" class="container">
        <div id="tabs">
          <div class="tab" id="trace-tab">Trace</div>
          <div class="tab" id="output-tab">Output</div>
          <div class="tab" id="docs-tab">Help</div>
        </div>
        <div id="panels">
          <div class="output-panel active" id="trace"></div>
          <div class="output-panel" id="output"></div>
          <div class="output-panel" id="docs">
            <h2>Language Documentation</h2>
            <a href="https://github.com/pungy/lang-dev">Github</a>
            <a href="/">Other systems</a>
            <p>
              A stack-based language. Words consume values from the stack and push results back.
            </p>
            <ul>
              <li>Case of words does not count, <code>dup</code> and <code>DUP</code> are the same.</li>
              <li>The notation <code>( before -- after )</code> shows a word's effect on the stack.</li>
            </ul>

            <h3>Editor</h3>
            During typing, following shortcuts are working.
            <dl class="doc-item">
              <dt><code>CTRL+S</code></dt>
              <dd>Run code.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>CTRL+I</code></dt>
              <dd>Show trace tab.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>CTRL+O</code></dt>
              <dd>Show output tab.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>CTRL+H</code></dt>
              <dd>Show help tab.</dd>
            </dl>

            <h3>Comments</h3>
            <dl class="doc-item">
              <dt><code>(...)</code></dt>
              <dd>Block scoped comment.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>\ ...</code></dt>
              <dd>Comment to the end of the line.</dd>
            </dl>

            <h3>Numeric Operations</h3>
            <dl class="doc-item">
              <dt><code>+</code></dt>
              <dd class="stack-effect"><code>( n1 n2 -- n1+n2 )</code></dd>
              <dd>Adds the top two numbers.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>-</code></dt>
              <dd class="stack-effect"><code>( n1 n2 -- n1-n2 )</code></dd>
              <dd>Subtracts the top number from the second.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>*</code></dt>
              <dd class="stack-effect"><code>( n1 n2 -- n1*n2 )</code></dd>
              <dd>Multiplies the top two numbers.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>/</code></dt>
              <dd class="stack-effect"><code>( n1 n2 -- n1/n2 )</code></dd>
              <dd>Divides the second number by the top one.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>= > &lt;</code></dt>
              <dd class="stack-effect"><code>( n1 n2 -- bool )</code></dd>
              <dd>Pushes <code>true</code> or <code>false</code> after comparison.</dd>
            </dl>

            <h3>String Operations</h3>
            <dl class="doc-item">
              <dt><code>'+</code></dt>
              <dd class="stack-effect"><code>( s1 s2 -- s1s2 )</code></dd>
              <dd>Concatenates two strings.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>'*</code></dt>
              <dd class="stack-effect"><code>( s n -- s*n )</code></dd>
              <dd>Repeats a string <code>n</code> times.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>'=</code></dt>
              <dd class="stack-effect"><code>( s1 s2 -- s1=s2 )</code></dd>
              <dd>String comparison, returns boolean.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>'LEN</code></dt>
              <dd class="stack-effect"><code>( s -- n )</code></dd>
              <dd>String length, returns number.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>'I</code></dt>
              <dd class="stack-effect"><code>( s n -- s[n] )</code></dd>
              <dd>Char at index, returns string.</dd>
            </dl>

            <h3>Boolean Logic</h3>
            <dl class="doc-item">
              <dt><code>NOT</code></dt>
              <dd class="stack-effect"><code>( bool -- !bool )</code></dd>
              <dd>Inverts a boolean value.</dd>
            </dl>

            <h3>Stack Manipulation</h3>
            <dl class="doc-item">
              <dt><code>DUP</code></dt>
              <dd class="stack-effect"><code>( a -- a a )</code></dd>
              <dd>Duplicates the top stack item.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>DROP</code></dt>
              <dd class="stack-effect"><code>( a -- )</code></dd>
              <dd>Removes the top stack item.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>SWAP</code></dt>
              <dd class="stack-effect"><code>( a b -- b a )</code></dd>
              <dd>Swaps the top two stack items.</dd>
              <dd></dd>
            </dl>
            <dl class="doc-item">
              <dt><code>OVER</code></dt>
              <dd class="stack-effect"><code>( a b -- a b a )</code></dd>
              <dd>Copies the second item to the top.</dd>
              <dd class="example">
<pre>5 9 over over > .s

--- PRINT-STACK ---
[0]: false
[1]: 9
[2]: 5
---</pre>
              </dd>
            </dl>
            <dl class="doc-item">
              <dt><code>PICK</code></dt>
              <dd class="stack-effect"><code>( .. xn..x0 n -- ..xn..x0 xn )</code></dd>
              <dd>Copies the n-th item (0-indexed) to the top.</dd>
              <dd class="example">
<pre>20 15 10 .s
(
[0]: 10
[1]: 15
[2]: 20 &lt;---
)
2 pick .s
(
[0]: 20 &lt;---
[1]: 10
[2]: 15
[3]: 20
)</pre>
              </dd>
            </dl>
            <dl class="doc-item">
              <dt><code>EMPTY?</code></dt>
              <dd class="stack-effect"><code>( -- bool )</code></dd>
              <dd>Pushes <code>boolean</code> if the stack is empty.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>STACK-LEN</code></dt>
              <dd class="stack-effect"><code>( -- len )</code></dd>
              <dd>Pushes the current stack depth.</dd>
            </dl>

            <h3>Printing & Output</h3>
            <dl class="doc-item">
              <dt><code>.</code></dt>
              <dd class="stack-effect"><code>( a -- )</code></dd>
              <dd>Pops and prints the top value.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>.p</code> or <code>PRINT</code></dt>
              <dd class="stack-effect"><code>( a -- a )</code></dd>
              <dd>Prints the top value without affecting stack.</dd>
            </dl>
            <dl class="doc-item">
              <dt><code>.s</code> or <code>PRINT-STACK</code></dt>
              <dd class="stack-effect"><code>( -- )</code></dd>
              <dd>Prints the entire stack non-destructively.</dd>
            </dl>

            <h3>Definitions & Control Flow</h3>
            <dl class="doc-item">
              <dt><code>: &lt;name&gt; ... ;</code></dt>
              <dd>Defines a new word.</dd>
              <dd class="example">
<pre>: SQUARE DUP * ;
5 SQUARE . ( prints 25 )</pre>
              </dd>
            </dl>
            <dl class="doc-item">
              <dt><code>&lt;cond&gt; IF ... THEN</code></dt>
              <dt><code>&lt;cond&gt; IF ... ELSE ... THEN</code></dt>
              <dd>Conditional branching.</dd>
              <dd class="example">
<pre>5 3 &gt; IF "Bigger" . THEN
\OUTPUT: "Bigger"

3 5 &gt; IF "Bigger" ELSE "Lesser" THEN .
\OUTPUT: "Lesser"
</pre>
              </dd>
            </dl>
            <dl class="doc-item">
              <dt><code>BEGIN ... &lt;cond&gt; UNTIL</code></dt>
              <dd>Loops until the condition is true.</dd>
              <dd class="example">
<pre>( Counts 0 to 4 )
0
BEGIN
  DUP . 1 +
  DUP 5 =
UNTIL

\OUTPUT: 0 1 2 3 4</pre></dd>
            </dl>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="/src/a0/main.ts"></script>
  </body>
</html>
